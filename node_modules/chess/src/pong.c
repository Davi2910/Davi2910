#include <stdio.h>
#include <stdlib.h>
#include <time.h>

#define WIDTH 640
#define HEIGHT 480

// Função para gerar números aleatórios entre 0 e 8
int randint(int min, int max) {
    return rand() % (max - min + 1) + min;
}

int main() {
    // Cria um tabuleiro de 8x8
    int tabuleiro[8][8];
    
    // Inicializa o jogo
    for (int i = 0; i < 8; i++) {
        for (int j = 0; j < 8; j++) {
            tabuleiro[i][j] = -1;
        }
    }

    // Cria a bola
    int x, y;
    srand(time(NULL));  // Srand para gerar números aleatórios
    x = randint(1, 7);   // Gera um número aleatório entre 1 e 8 para o jogador
    y = randint(1, 7);   // Gera outro número aleatório entre 0 e 4 para a bola

    while (1) {
        // Verifica se o jogador deve jogar ou não
        printf("Player 1: ");
        scanf("%d", &x);
        
        if (x == -2) {  // Se o jogador digitar -2, é jogada pela outra pessoa
            x = WIDTH / 2;
            y = HEIGHT / 2;

            while (1) {
                printf("Player 2: "); 
                scanf("%d", &y);

                if (x == y && x != 0 && x != 8 - 1) {
                    // Player 2 acerta o tabuleiro
                    for (int i = 0; i < 8; i++) {
                        for (int j = 0; j < 8; j++) {
                            if (i == y || j == x || i != x && j != y) {
                                tabuleiro[i][j] = -1;
                            }
                        }
                    }

                    break;
                } else {
                    printf("Player 2 não acertou a bola.\n");
                }
            }

            // Printa o tabuleiro atual.
            for (int i = 0; i < 8; i++) {
                for (int j = 0; j < 8; j++) {
                    if (tabuleiro[i][j] == -1) {
                        printf("\033[34mX\033[0m"); // Vermelho.
                    } else {
                        printf("%4d", tabuleiro[i][j]);
                    }
                }
                printf("\n");
            }

            break;
        }

        // Mover a bola
        if (x > 1 && x < 8) {  // Se o jogador digitar um número entre 1 e 7, move para direita.
            x++;
        } else if (x > 7) {   // Se o jogador digitar -2, é jogada pela outra pessoa.
            x--;
        }
    }

    return 0;
}
